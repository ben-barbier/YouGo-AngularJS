<ng-include src="'partials/header.html'"></ng-include>

<div class="container" ng-controller="RequestTypeCtrl">

  <h1>Types de demande</h1>
  <div>
    <div class="alert" ng-hide="message==''">{{message}}</div>
    <div>
      <a class="btn btn-primary" href="#addRequestTypeModal" data-toggle="modal">Ajouter un type de demande</a>
      <br />
      <br />
      <table class="table table-hover table-condensed">
        <thead>
          <tr>
            <th>ID</th>
            <th>Description</th>
            <th></th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          <tr ng-repeat="requestType in requestTypes">
            <td>{{requestType.id}}</td>
            <td>{{requestType.description}}</td>
            <td><a href="#editRequestTypeModal" data-toggle="modal" ng-click="selectRequestType(requestType.id);"><i class="icon-pencil"></i></a></td>
            <td><a href="#deleteRequestTypeModal" data-toggle="modal" ng-click="selectRequestType(requestType.id);"><i class="icon-trash"></i></a></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Delete Request Type Modal -->
  <div id="deleteRequestTypeModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="deleteRequestTypeModalLabel" aria-hidden="true">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
      <h3 id="deleteRequestTypeModalLabel">Supprimer le type de demande</h3>
    </div>
    <div class="modal-body">
      <p>Etes vous sur de vouloir supprimer le type de demande<br />{{selectedRequestType.id}}: "{{selectedRequestType.description}}" ?</p>
    </div>
    <div class="modal-footer">
      <button class="btn" data-dismiss="modal" aria-hidden="true">Annuler</button>
      <button class="btn btn-danger" data-dismiss="modal" ng-click="removeRequestType(selectedRequestType.id);">Supprimer</button>
    </div>
  </div>

  <!-- Edit Request Type Modal -->
  <div id="editRequestTypeModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="editRequestTypeModalLabel" aria-hidden="true">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
      <h3 id="editRequestTypeModalLabel">Modifier le type de demande</h3>
    </div>
    <div class="modal-body">
      <table>
        <tr>
          <td>ID : </td>
          <td>{{selectedRequestType.id}}</td>
        </tr>
        <tr>
          <td>Description : </td>
          <td><input type="text" name="description" ng-model="selectedRequestType.description"/></td>
        </tr>
      </table>
    </div>
    <div class="modal-footer">
      <button class="btn" data-dismiss="modal" aria-hidden="true">Annuler</button>
      <button class="btn btn-primary" data-dismiss="modal" ng-click="updateRequestType(selectedRequestType);">Modifier</button>
    </div>
  </div>

  <!-- Add Request Type Modal -->
  <div id="addRequestTypeModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="addRequestTypeModalLabel" aria-hidden="true">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
      <h3 id="addRequestTypeModalLabel">Ajouter un type de demande</h3>
    </div>
    <div class="modal-body">
      Description : <input type="text" name="description" ng-model="newDescription" />
    </div>
    <div class="modal-footer">
      <button class="btn" data-dismiss="modal" aria-hidden="true">Annuler</button>
      <button class="btn btn-primary" data-dismiss="modal" ng-click="addRequestType(newDescription);">Ajouter</button>
    </div>
  </div>

  <ng-include src="'partials/footer.html'"></ng-include>

</div> <!-- /container -->